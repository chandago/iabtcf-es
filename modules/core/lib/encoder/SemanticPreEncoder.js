"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var errors_1=require("../errors"),SemanticPreEncoder=function(){function e(){}return e.process=function(e,r){var o,n,s=e.gvl;if(!s)throw new errors_1.EncodingError("Unable to encode TCModel without a GVL");if(!s.isReady)throw new errors_1.EncodingError("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(e=e.clone()).consentLanguage=s.language.toUpperCase(),(null===(o=r)||void 0===o?void 0:o.version)>0&&(null===(n=r)||void 0===n?void 0:n.version)<=this.processor.length?e.version=r.version:e.version=this.processor.length;var t=e.version-1;if(!this.processor[t])throw new errors_1.EncodingError("Invalid version: "+e.version);return this.processor[t](e,s)},e.processor=[function(e){return e},function(e,r){e.publisherRestrictions.gvl=r,e.purposeLegitimateInterests.unset(1);var o=new Map;return o.set(e.vendorLegitimateInterests,"legIntPurposes"),o.set(e.vendorConsents,"purposes"),o.forEach((function(e,o){o.forEach((function(n,s){var t=r.vendors[s];(!t||n&&0===t[e].length)&&o.unset(s)}))})),e.vendorsDisclosed.set(r.vendors),e}],e}();exports.SemanticPreEncoder=SemanticPreEncoder;